---
import Welcome from "../components/Welcome.astro";
import Layout from "../layouts/Layout.astro";

// Get authenticated user from locals (set by middleware)
const { user } = Astro.locals;
---

<Layout>
  {
    user ? (
      <Welcome />
    ) : (
      <div class="container mx-auto px-4 py-8" data-test-id="guest-welcome-container">
        <div
          data-test-id="guest-auth-card"
          class="mb-8 rounded-lg bg-blue-50 p-4 text-blue-800 dark:bg-blue-900 dark:text-blue-100"
        >
          <p class="text-lg font-semibold">Witaj w 10xRules!</p>
          <p class="mt-2">
            Zaloguj się lub zarejestruj, aby korzystać z aplikacji.
          </p>
          <div class="mt-4 flex gap-4">
            <a
              data-test-id="guest-login-cta"
              href="/auth/login"
              class="rounded bg-blue-600 px-4 py-2 font-semibold text-white hover:bg-blue-700"
            >
              Zaloguj się
            </a>
            <a
              data-test-id="guest-signup-cta"
              href="/auth/signup"
              class="rounded bg-green-600 px-4 py-2 font-semibold text-white hover:bg-green-700"
            >
              Zarejestruj się
            </a>
          </div>
        </div>
        <Welcome />
      </div>
    )
  }
</Layout>
